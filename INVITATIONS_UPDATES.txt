INVITATIONS.JS UPDATES - 4 QUICK EDITS:

====================
EDIT #1: Change polling to 12 seconds (line ~262)
====================
FIND:
  setInterval(async () => {
    console.log('[Invitations] Polling...');
    await fetchPendingInvitations();
  }, 5000); // 5 seconds

  console.log('[Invitations] Polling active (every 5 seconds)');

REPLACE WITH:
  setInterval(async () => {
    console.log('[Invitations] Polling...');
    await fetchPendingInvitations();
  }, 12000); // 12 seconds

  console.log('[Invitations] Polling active (every 12 seconds)');

====================
EDIT #2: Add Remove button to notifications (in renderInvitationsList)
====================
FIND this section (around line 360):
          ${!isRead ? `
          <div style="display: flex; gap: 6px; margin-top: 8px; justify-content: flex-end;">
            <button class="btn" data-action="mark-read" data-notif-id="${item.id}">Mark as Read</button>
          </div>
          ` : ''}

REPLACE WITH:
          <div style="display: flex; gap: 6px; margin-top: 8px; justify-content: flex-end;">
            ${!isRead ? `<button class="btn" data-action="mark-read" data-notif-id="${item.id}">Mark as Read</button>` : ''}
            <button class="btn danger" data-action="remove" data-notif-id="${item.id}">Remove</button>
          </div>

====================
EDIT #3: Add handler for remove action and confirmation modal
====================
FIND this section (around line 380):
      if (action === 'accept') {
        await acceptInvitation(inviteId);
      } else if (action === 'decline') {
        await declineInvitation(inviteId);
      } else if (action === 'dismiss') {
        await dismissInvitation(inviteId);
      } else if (action === 'mark-read') {
        await markNotificationAsRead(notifId);
      }

REPLACE WITH:
      if (action === 'accept') {
        await acceptInvitation(inviteId);
      } else if (action === 'decline') {
        await declineInvitation(inviteId);
      } else if (action === 'dismiss') {
        await dismissInvitation(inviteId);
      } else if (action === 'mark-read') {
        await markNotificationAsRead(notifId);
      } else if (action === 'remove') {
        await confirmRemoveNotification(notifId);
      }

====================
EDIT #4: Add confirmRemoveNotification and removeNotification functions at END of file
====================
ADD THESE TWO FUNCTIONS at the very end of invitations.js (after markNotificationAsRead):

/**
 * Show confirmation modal before removing notification
 */
async function confirmRemoveNotification(notifId) {
  // Create confirmation modal
  const modal = document.createElement('div');
  modal.className = 'modal-overlay';
  modal.style.zIndex = '10001'; // Above notifications modal
  modal.innerHTML = `
    <div class="modal-content card" style="max-width: 400px; margin: 20vh auto; padding: 20px;">
      <h3 style="margin: 0 0 12px 0;">Remove Notification?</h3>
      <p style="margin: 0 0 20px 0; color: var(--muted);">
        This notification will be permanently deleted. This action cannot be undone.
      </p>
      <div style="display: flex; gap: 10px; justify-content: flex-end;">
        <button class="btn" id="cancelRemove">Cancel</button>
        <button class="btn danger" id="confirmRemove">Remove</button>
      </div>
    </div>
  `;
  
  document.body.appendChild(modal);
  
  // Handle cancel
  modal.querySelector('#cancelRemove').addEventListener('click', () => {
    modal.remove();
  });
  
  // Handle confirm
  modal.querySelector('#confirmRemove').addEventListener('click', async () => {
    modal.remove();
    await removeNotification(notifId);
  });
  
  // Click outside to close
  modal.addEventListener('click', (e) => {
    if (e.target === modal) {
      modal.remove();
    }
  });
}

/**
 * Remove (delete) a notification permanently
 */
async function removeNotification(notifId) {
  const supabase = getSupabaseClient();
  if (!supabase) return;

  try {
    const { error } = await supabase
      .from('notifications')
      .delete()
      .eq('id', notifId);

    if (error) throw error;

    // Refresh invitations/notifications list
    await fetchPendingInvitations();
    renderInvitationsList();

    // Show success message
    const notifBanner = document.createElement('div');
    notifBanner.className = 'notification';
    notifBanner.textContent = 'Notification removed.';
    notifBanner.style.background = '#10b981';
    document.body.appendChild(notifBanner);
    setTimeout(() => notifBanner.remove(), 3000);

  } catch (err) {
    console.error('[Invitations] Error removing notification:', err);
    alert('Failed to remove notification. Please try again.');
  }
}

====================
DONE! 4 edits total
====================
